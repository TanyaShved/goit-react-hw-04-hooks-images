(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{10:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2AxMb",Modal:"Modal_Modal__2WBTT"}},11:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__3CvRl",ImageGalleryItem_image:"ImageGalleryItem_ImageGalleryItem_image__1P7Nb"}},13:function(e,t,a){e.exports={Button:"Button_Button__3R1xi"}},15:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__DncjJ"}},21:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var c=a(1),r=a(0),n=a.n(r),o=a(4),s=a.n(o),i=(a(21),a(3)),l=a(8),u=(a(22),a(5)),m=a.n(u),b=function(e){var t=e.onSubmit,a=Object(r.useState)(""),n=Object(i.a)(a,2),o=n[0],s=n[1];return Object(c.jsx)("header",{className:m.a.Searchbar,children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==o.trim()?(t(o),s("")):l.b.warn("\u0412\u0432\u0438\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435!")},className:m.a.SearchForm,children:[Object(c.jsx)("button",{type:"submit",className:m.a.SearchForm_button,children:Object(c.jsx)("span",{className:m.a.SearchForm_button_label,children:"Search"})}),Object(c.jsx)("input",{className:m.a.SearchForm_input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:o,onChange:function(e){s(e.currentTarget.value.toLowerCase())}})]})})},j=a(12);var h={fetchImages:function(e,t){return fetch("".concat("https://pixabay.com/api/","?q=").concat(e,"&page=").concat(t,"&key=").concat("19013398-a980467a71ce13bd0d53bc132","&image_type=photo&orientation=horizontal&per_page=12")).then((function(t){return t.ok?t.json():Promise.reject(new Error("\u041d\u0435\u0442 \u0433\u0430\u043b\u043b\u0435\u0440\u0435\u0438 \u0441 \u0442\u0430\u043a\u0438\u043c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c ".concat(e)))}))}},g=a(10),d=a.n(g),_=document.querySelector("#modal-root"),O=function(e){var t=e.onClick,a=e.largeImageURL,n=Object(r.useRef)(!0);Object(r.useEffect)((function(){return n.current?(window.addEventListener("keydown",s),void(n.current=!1)):function(){window.removeEventListener("keydown",s)}}));var s=function(e){"Escape"===e.code&&t()};return Object(o.createPortal)(Object(c.jsx)("div",{className:d.a.Overlay,onClick:function(e){e.currentTarget===e.target&&t()},children:Object(c.jsx)("div",{className:d.a.Modal,children:Object(c.jsx)("img",{src:a,alt:""})})}),_)},f=a(11),p=a.n(f),x=function(e){var t=e.webformatURL,a=e.largeImageURL,n=e.tags,o=Object(r.useState)(!1),s=Object(i.a)(o,2),l=s[0],u=s[1],m=function(){u((function(e){return!e}))};return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("li",{className:p.a.ImageGalleryItem,children:[Object(c.jsx)("img",{onClick:m,src:t,alt:n,className:p.a.ImageGalleryItem_image}),l&&Object(c.jsx)(O,{onClick:m,largeImageURL:a,alt:n})]})})},S=a(13),I=a.n(S),v=function(e){var t=e.onClick;return Object(c.jsx)("button",{type:"button",className:I.a.Button,onClick:t,children:"Load More"})},y=a(14),w=a.n(y),F=(a(44),a(15)),k=a.n(F),C="idle",N="pending",G="resolved",L="rejected",R=function(e){var t=e.imageName,a=e.page,n=e.images,o=e.setImages,s=e.setPage,l=Object(r.useState)(null),u=Object(i.a)(l,2),m=u[0],b=u[1],g=Object(r.useState)(C),d=Object(i.a)(g,2),_=d[0],O=d[1];return Object(r.useEffect)((function(){t&&(O(N),h.fetchImages(t,a).then((function(e){return 0!==e.hits.length?(o((function(t){return[].concat(Object(j.a)(t),Object(j.a)(e.hits))})),void O(G)):Promise.reject(new Error("\u041d\u0435\u0442 \u0433\u0430\u043b\u043b\u0435\u0440\u0435\u0438 \u0441 \u0442\u0430\u043a\u0438\u043c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c ".concat(t)))})).then((function(){1!==a&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){b(e),O(L)})))}),[a,o,t]),_===C?Object(c.jsx)("h1",{children:"\u0412\u0432\u0438\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}):_===N?Object(c.jsx)(w.a,{type:"Bars",color:"#00BFFF",height:100,width:100,timeout:3e3}):_===L?Object(c.jsx)("h1",{children:m.message}):_===G?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("ul",{className:k.a.ImageGallery,children:n.map((function(e){var t=e.id,a=e.webformatURL,r=e.largeImageURL,n=e.tags;return Object(c.jsx)(x,{webformatURL:a,largeImageURL:r,tags:n},t)}))}),Object(c.jsx)(v,{onClick:function(){return s(a+1)}})]}):void 0},B=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)(1),s=Object(i.a)(o,2),u=s[0],m=s[1],j=Object(r.useState)([]),h=Object(i.a)(j,2),g=h[0],d=h[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(b,{onSubmit:function(e){n(e),d([]),m(1)}}),Object(c.jsx)(R,{imageName:a,images:g,page:u,setImages:d,setPage:m}),Object(c.jsx)(l.a,{position:"top-center"})]})};s.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(B,{})}),document.getElementById("root"))},5:function(e,t,a){e.exports={Searchbar:"Searcbar_Searchbar__srXIb",SearchForm:"Searcbar_SearchForm__P4C8_",SearchForm_button:"Searcbar_SearchForm_button__1CVq2",SearchForm_button_label:"Searcbar_SearchForm_button_label__1B5iQ",SearchForm_input:"Searcbar_SearchForm_input__1YCxI"}}},[[45,1,2]]]);
//# sourceMappingURL=main.cd8b4920.chunk.js.map